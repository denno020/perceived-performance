<section>
  <section>
    <h2>Local Data Cache</h2>
    <ul>
      <li class="fragment"
        >Remember what user has already seen <sup>(Demo 2)</sup></li
      >
    </ul>
  </section>
  <section
    data-background-video="/media/local-data-cache-no-cache.mp4"
    data-background-video-loop="true"
    data-background-video-muted="true"
    data-background-size="contain"
  >
  </section>
  <section>
    <h2>Local Data Cache</h2>
    <ul>
      <li class="fragment" data-demo-step="4"
        >Use cached data while getting an update from server
        <sup>Demo 4</sup></li
      >
      <li class="fragment">stale-while-revalidate</li>
      <li class="fragment">Apollo Client</li>
      <li class="fragment">Vanilla JS, in memory</li>
    </ul>
  </section>
  <section
    data-background-video="/media/local-data-cache.mp4"
    data-background-video-loop="true"
    data-background-video-muted="true"
    data-background-size="contain"
  >
  </section>
  <section>
    <h2>Local Data Cache</h2>
    <ul>
      <li>Implementation</li>
      <li class="fragment"
        >Save to cache
        <pre><code data-trim data-noescape>
        cache.addToCache({ 
          key: `product-${productId}`,
          value: JSON.stringify(res.product)
        })
      </code></pre>
      </li>
      <li class="fragment"
        >Read from cache
        <pre><code data-trim data-noescape>
      const [product, setProduct] = useState(() => {
        const cachedProduct = cache.getItem(`product-${productId}`);
        if (cachedProduct) return cachedProduct;
        return undefined;
      });
    </code></pre>
      </li>
    </ul>
  </section>
  <section>
    <h2>Local Data Cache</h2>
    <ul>
      <li>In memory or persisted</li>
      <li class="fragment"
        >How to persist
        <ul>
          <li class="fragment">localStorage</li>
          <li class="fragment">sessionStorage</li>
          <li class="fragment">IndexedDB</li>
          <li class="fragment">Cache API</li>
        </ul>
      </li>
      <li class="fragment"
        >Swap cache object for read/write to storage location</li
      >
    </ul>
  </section>
</section>
